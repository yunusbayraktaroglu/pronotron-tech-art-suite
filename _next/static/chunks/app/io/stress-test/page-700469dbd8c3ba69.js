(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{7601:function(e,t,o){Promise.resolve().then(o.bind(o,9728))},9267:function(e,t,o){"use strict";o.d(t,{V:function(){return i},b:function(){return l}});var n=o(7573),s=o(7653),r=o(5357);function l(e){let{dispatch:t,offset:o,onRemoveNode:l,...i}=e,c=(0,s.useRef)(null),a=(0,r.s)(e=>e.io);return(0,s.useEffect)(()=>{let e=c.current,n=a.addNode({ref:e,dispatch:t,offset:o,onRemoveNode:l,getBounds:()=>{let{top:t,bottom:o}=e.getBoundingClientRect();return{start:t+window.scrollY,end:o+window.scrollY}}});return()=>{!1!==n&&a.removeNode(e)}},[]),(0,n.jsx)("div",{ref:c,...i,"data-io":"1"})}function i(e){let{dispatch:t,offset:o,onRemoveNode:l,...i}=e,c=(0,s.useRef)(null),a=(0,r.s)(e=>e.io),[d,x]=(0,s.useState)({top:0,bottom:0});(0,s.useEffect)(()=>{let e=c.current,n=a.addNode({ref:e,dispatch:t,offset:o,onRemoveNode:l,getBounds:()=>{let{top:t,bottom:o}=e.getBoundingClientRect(),n=t+window.scrollY,s=o+window.scrollY;return x({top:n,bottom:s}),{start:n,end:s}}});return()=>{!1!==n&&a.removeNode(e)}},[]);let u="absolute w-[10px] h-[10px] bg-red-500 rounded-full";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:c,...i,"data-io":"1"}),(0,n.jsx)("span",{className:u,style:{top:"".concat(Math.round(d.top-5),"px")},children:(0,n.jsx)("p",{className:"text-xs leading-none ml-[12px]",children:Math.round(d.top)})}),(0,n.jsx)("span",{className:u,style:{top:"".concat(Math.round(d.bottom-5),"px")},children:(0,n.jsx)("p",{className:"text-xs leading-none ml-[12px]",children:Math.round(d.bottom)})})]})}},9728:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l}});var n=o(7573),s=o(7653),r=o(9267);function l(){let[e,t]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"container mb-spacing-3xl",children:[(0,n.jsxs)("div",{className:"bg-slate-200 p-spacing-lg rounded-lg",children:[e?(0,n.jsxs)("p",{className:"text-green-800 mb-5",children:["Created ",e.ioCount," node. Scroll down to see effects. Check starts for performance."]}):null,(0,n.jsx)(i,{runTestScenario:t})]}),e?Array.from({length:e.ioCount}).map((t,o)=>{let{dispatchType:s,inViewport:l,topEnter:i,topExit:a,bottomEnter:d,bottomExit:x,onFastForward:u}=e;switch(s){case"modify_dom":return(0,n.jsx)(c,{index:o,inViewport:l,topEnter:i,topExit:a,bottomEnter:d,bottomExit:x,onFastForward:u},"".concat(e.testCount,"_").concat(o));case"console_log":return(0,n.jsx)(r.b,{className:"bg-green-500 my-[120vh]",offset:0,dispatch:function(e){let{index:t,inViewport:o,topEnter:n,topExit:s,bottomEnter:r,bottomExit:l,onFastForward:i}=e;return{...o&&{onInViewport:e=>console.log("".concat(t,": Normalized position: ").concat(e))},...n&&{onTopEnter:()=>console.log("".concat(t,": top-enter"))},...s&&{onTopExit:()=>console.log("".concat(t,": top-exit"))},...r&&{onBottomEnter:()=>console.log("".concat(t,": bottom-enter"))},...l&&{onBottomExit:()=>console.log("".concat(t,": bottom-exit"))},onFastForward:i}}({index:o,inViewport:l,topEnter:i,topExit:a,bottomEnter:d,bottomExit:x,onFastForward:u}),children:(0,n.jsx)("p",{className:"text-center",children:o})},"".concat(e.testCount,"_").concat(o));case"never":return(0,n.jsx)(r.b,{className:"bg-green-500 my-[120vh]",offset:0,dispatch:function(e){let{inViewport:t,topEnter:o,topExit:n,bottomEnter:s,bottomExit:r,onFastForward:l}=e;return{...t&&{onInViewport:()=>{}},...o&&{onTopEnter:()=>{}},...n&&{onTopExit:()=>{}},...s&&{onBottomEnter:()=>{}},...r&&{onBottomExit:()=>{}},onFastForward:l}}({inViewport:l,topEnter:i,topExit:a,bottomEnter:d,bottomExit:x,onFastForward:u}),children:(0,n.jsx)("p",{className:"text-center",children:o})},"".concat(e.testCount,"_").concat(o))}}):null]})}function i(e){let{runTestScenario:t}=e,o=(0,s.useRef)(0),[r,l]=(0,s.useState)(""),[i,c]=(0,s.useState)({ioCount:1e3,dispatchType:"modify_dom",inViewport:!0,topEnter:!0,topExit:!0,bottomEnter:!0,bottomExit:!0,onFastForward:"skip_both"}),a=e=>{let{name:t,checked:o}=e.target;c(e=>({...e,[t]:o}))},d=e=>{let{name:t,value:o}=e.target;c(e=>({...e,[t]:o}))};return(0,n.jsxs)("div",{className:"form",children:[r&&(0,n.jsx)("p",{className:"text-red-500 mb-spacing-sm",children:r}),(0,n.jsxs)("fieldset",{className:"flex flex-col landscape:flex-row justify-between items-start gap-5",children:[(0,n.jsxs)("fieldset",{className:"grid grid-rows-1 grid-cols-1 landscape:grid-cols-4 landscape:grid-rows-1 gap-5",children:[(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("label",{htmlFor:"ioCount",children:"IO Node count"}),(0,n.jsx)("input",{className:"w-full",type:"number",min:100,name:"ioCount",id:"ioCount",value:i.ioCount,onChange:e=>{let{name:t,value:o}=e.target;c(e=>({...e,[t]:Number(o)}))}})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("label",{htmlFor:"dispatch-type",children:"Dispatch type"}),(0,n.jsxs)("select",{onChange:d,name:"dispatchType",id:"dispatch-type",className:"w-full",children:[(0,n.jsx)("option",{value:"modify_dom",children:"Modify dom"}),(0,n.jsx)("option",{value:"console_log",children:"Console log"}),(0,n.jsx)("option",{value:"never",children:"Never (useful for iteration speed)"})]})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("label",{htmlFor:"fast-forward",children:"Fast-forward behavior"}),(0,n.jsxs)("select",{onChange:d,name:"onFastForward",id:"fast-forward",className:"w-full",children:[(0,n.jsx)("option",{value:"skip_both",children:"Skip both (default)"}),(0,n.jsx)("option",{value:"execute_both",children:"Execute both events"}),(0,n.jsx)("option",{value:"execute_last",children:"Execute last event"})]})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("label",{children:"Track events"}),(0,n.jsxs)("fieldset",{className:"checkbox",children:[(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("input",{type:"checkbox",name:"inViewport",id:"in-viewport",checked:i.inViewport,onChange:a}),(0,n.jsx)("label",{htmlFor:"in-viewport",children:"In viewport"})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("input",{type:"checkbox",name:"topEnter",id:"top-enter",checked:i.topEnter,onChange:a}),(0,n.jsx)("label",{htmlFor:"top-enter",children:"Top-enter"})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("input",{type:"checkbox",name:"topExit",id:"top-exit",checked:i.topExit,onChange:a}),(0,n.jsx)("label",{htmlFor:"top-exit",children:"Top-exit"})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("input",{type:"checkbox",name:"bottomEnter",id:"bottom-enter",checked:i.bottomEnter,onChange:a}),(0,n.jsx)("label",{htmlFor:"bottom-enter",children:"Bottom-enter"})]}),(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("input",{type:"checkbox",name:"bottomExit",id:"bottom-exit",checked:i.bottomExit,onChange:a}),(0,n.jsx)("label",{htmlFor:"bottom-exit",children:"Bottom-exit"})]})]})]})]}),(0,n.jsx)("button",{onClick:()=>{let{inViewport:e,topEnter:n,topExit:s,bottomEnter:r,bottomExit:c}=i;if(!e&&!n&&!s&&!r&&!c){l("Please select at least 1 event");return}o.current+=1,t({testCount:o.current,...i}),l("")},className:"block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full transition-colors",children:"Create IO nodes"})]})]})}function c(e){let{index:t,inViewport:o,topEnter:l,topExit:i,bottomEnter:c,bottomExit:a,onFastForward:d}=e,[x,u]=(0,s.useState)(0),[p,h]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"my-[120vh] text-center",children:[(0,n.jsxs)("p",{children:[(0,n.jsxs)("strong",{children:["#",t,":"]})," Last recorded event: ",p||null]}),(0,n.jsx)(r.b,{className:"bg-green-500 my-5 py-2",offset:0,dispatch:{...!0===o&&{onInViewport:e=>u(e)},...!0===l&&{onTopEnter:()=>h("Top-enter")},...!0===i&&{onTopExit:()=>h("Top-exit")},...!0===c&&{onBottomEnter:()=>h("Bottom-enter")},...!0===a&&{onBottomExit:()=>h("Bottom-exit")},onFastForward:d},children:(0,n.jsxs)("p",{children:["Normalized Position: ",x.toFixed(2)]})}),(0,n.jsxs)("p",{children:[(0,n.jsxs)("strong",{children:["#",t,":"]})," Last recorded event: ",p||null]})]})}}},function(e){e.O(0,[900,357,293,528,744],function(){return e(e.s=7601)}),_N_E=e.O()}]);