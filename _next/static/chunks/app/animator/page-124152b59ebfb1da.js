(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{7273:function(t,e,i){Promise.resolve().then(i.bind(i,5161))},8476:function(t,e,i){"use strict";i.d(e,{PronotronAnimatorProvider:function(){return c},w:function(){return o}});var s=i(7573),n=i(7653),a=i(2138),l=i(1378);let r=new a.hd,o=new a.g0(r,50),h=(0,n.createContext)(void 0);function c(t){let{children:e}=t;return(0,n.useEffect)(()=>{let t=0,e=()=>{r.tick(),l.ot.begin(),o.tick(),l.ot.end(),t=requestAnimationFrame(e)};t=requestAnimationFrame(e);let i=()=>{document.hidden?r.pause():r.resume()};return document.addEventListener("visibilitychange",i),()=>{cancelAnimationFrame(t),l.ot.resetPanels(),document.removeEventListener("visibilitychange",i)}},[]),(0,s.jsx)(h.Provider,{value:{animator:o},children:e})}},5161:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var s=i(7573),n=i(7653),a=i(5544),l=i(8476);function r(t){let{id:e,autoPause:i,delay:a}=t,[l,r]=(0,n.useState)("waiting");return(0,s.jsxs)("div",{className:"running"===l?"p-3 bg-orange-300":"p-3 bg-green-300",children:[(0,s.jsxs)("p",{className:"text-xs",children:["Animation: #",e]}),(0,s.jsx)(o,{id:e,autoPause:i,delay:a,setParentState:r})]})}function o(t){let{id:e,autoPause:i,delay:a,setParentState:r}=t,[o,h]=(0,n.useState)(0),[c,u]=(0,n.useState)("waiting"),[d,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{l.w.add({id:"animation_".concat(e),duration:(10+Number(e))/10,delay:a,autoPause:i,onRender:(t,e,i)=>{h(Math.min((t-e)/i,1))},onEnd:t=>{t||(u("end"),r("end"),m(!0))}}),u("running"),r("running")},[]),(0,n.useEffect)(()=>()=>{d||"running"!==c||l.w.remove("animation_".concat(e),!0)},[d]),(0,s.jsx)("div",{className:"w-full block bg-slate-900 h-[5px] origin-left",style:{transform:"translate3d( 0, 0, 0 ) scaleX(".concat(o,")")}})}function h(){let{setShowStats:t}=(0,a.W)(),[e,i]=(0,n.useState)({testCount:0,animationCount:50,autoPause:!0,delay:0});return(0,n.useEffect)(()=>{t(!0)},[]),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(c,{runTestScenario:i}),(0,s.jsx)("div",{className:"grid grid-cols-3 landscape:grid-cols-4 gap-spacing-xs my-spacing-base",children:Array.from({length:e.animationCount}).map((t,i)=>(0,s.jsx)(r,{id:"".concat(i),autoPause:e.autoPause,delay:e.delay},"".concat(e.testCount,"_").concat(i)))})]})}function c(t){let{runTestScenario:e}=t,i=(0,n.useRef)(0),[a,l]=(0,n.useState)({animationCount:1e3,autoPause:!0,delay:0}),r=(0,n.useCallback)(t=>{let{name:e,value:i}=t.target;l(t=>({...t,[e]:Number(i)}))},[]);(0,n.useCallback)(t=>{let{name:e,value:i}=t.target;l(t=>({...t,[e]:i}))},[]);let o=(0,n.useCallback)(t=>{let{name:e,checked:i}=t.target;l(t=>({...t,[e]:i}))},[]),h=(0,n.useCallback)(()=>{i.current+=1,e({testCount:i.current,...a})},[a]);return(0,s.jsxs)("div",{className:"form flex flex-col landscape:flex-row items-start gap-5 bg-slate-200 p-spacing-lg mt-spacing-base rounded-lg",children:[(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("label",{htmlFor:"animationCount",children:"Animation count"}),(0,s.jsx)("input",{type:"number",min:100,name:"animationCount",id:"animationCount",value:a.animationCount,onChange:r})]}),(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("label",{htmlFor:"autoPause",children:"Auto pause"}),(0,s.jsx)("input",{type:"checkbox",name:"autoPause",id:"autoPause",checked:a.autoPause,onChange:o})]}),(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("label",{htmlFor:"delay",children:"Delay"}),(0,s.jsx)("input",{type:"number",min:0,step:.1,name:"delay",id:"delay",value:a.delay,onChange:r})]}),(0,s.jsx)("button",{onClick:h,className:"block text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-full transition-colors landscape:ml-auto",children:"Create Animations"})]})}},1378:function(t,e,i){"use strict";i.d(e,{PronotronStatsComponent:function(){return h},ot:function(){return o}});var s=i(7573),n=i(7653),a=i(5544);class l{build(){this.pixelRatio=1,this.table={FONTSIZE:9,WIDTH:80,HEIGHT:48,TEXT_X:3,TEXT_Y:2,GRAPH_X:3,GRAPH_Y:15,GRAPH_WIDTH:74,GRAPH_HEIGHT:30},this.createCanvas()}createCanvas(){let t=this.name,{FONTSIZE:e,WIDTH:i,HEIGHT:s,TEXT_X:n,TEXT_Y:a,GRAPH_X:l,GRAPH_Y:r,GRAPH_WIDTH:o,GRAPH_HEIGHT:h}=this.table,c=document.createElement("canvas");c.width=i,c.height=s,c.style.cssText="width:".concat(i,"px;height:").concat(s,"px");let u=c.getContext("2d");u.font="bold ".concat(e,"px Helvetica,Arial,sans-serif"),u.textBaseline="top",u.fillStyle=this.bg,u.fillRect(0,0,i,s),u.fillStyle=this.fg,u.fillText(t,n,a),u.fillRect(l,r,o,h),u.fillStyle=this.bg,u.globalAlpha=.9,u.fillRect(l,r,o,h),this.canvas=c,this.context=u}update(t){let e=this.pixelRatio,{WIDTH:i,HEIGHT:s,TEXT_X:n,TEXT_Y:a,GRAPH_X:l,GRAPH_Y:r,GRAPH_WIDTH:o,GRAPH_HEIGHT:h}=this.table;this.min=Math.min(this.min,t),this.max=Math.max(this.max,t),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,i,r),this.context.fillStyle=this.fg,this.context.fillText("".concat(Math.round(t)," ").concat(this.name," (").concat(Math.round(this.min)," - ").concat(Math.round(this.max),")"),n,a),this.context.drawImage(this.canvas,l+e,r,o-e,h,l,r,o-e,h),this.context.fillRect(l+o-e,r,e,h),this.context.fillStyle=this.bg,this.context.globalAlpha=.75,this.context.fillRect(l+o-e,r,e,Math.round((1-t/this.maxLimit)*h))}clearCanvas(){let{WIDTH:t,HEIGHT:e}=this.table;this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,t,e)}constructor(t,e,i){this.min=1/0,this.max=0,this.maxLimit=0,this.name=t,this.fg=e,this.bg=i}}class r{build(){this.ready||(this.fps.build(),this.ms.build(),this.mb.build(),this.fps.maxLimit=100,this.ms.maxLimit=2,this.ready=!0)}begin(){this.beginTime=performance.now()}end(){this.frames++;let t=performance.now();return this.ms.update(t-this.beginTime),this.ms.maxLimit=2*this.ms.max,t>=this.prevTime+1e3&&(this.fps.update(1e3*this.frames/(t-this.prevTime)),this.prevTime=t,this.frames=0),t}getPanels(){return[this.fps.canvas,this.ms.canvas]}resetPanels(){this.fps.clearCanvas(),this.ms.clearCanvas(),this.frames=0}constructor(){this.ready=!1,this.frames=0,this.fps=new l("FPS","#0ff","#002"),this.ms=new l("MS","#0f0","#020"),this.mb=new l("MB","#f08","#201"),this.beginTime=performance.now(),this.prevTime=this.beginTime}}let o=new r;function h(){let t=(0,n.useRef)(null),{showStats:e}=(0,a.W)();return(0,n.useEffect)(()=>{o.build();let e=t.current,i=o.getPanels();for(;e.firstChild;)e.removeChild(e.firstChild);i.forEach(t=>e.appendChild(t))},[]),(0,s.jsx)("div",{id:"performance-stats",className:"fixed flex flex-col left-2 bottom-2 opacity-[1] z-[999] space-y-[1px]"+(e?"":" hidden"),ref:t})}},5544:function(t,e,i){"use strict";i.d(e,{PerformanceStatsProvider:function(){return l},W:function(){return r}});var s=i(7573),n=i(7653);let a=(0,n.createContext)(null);function l(t){let{children:e}=t,[i,l]=(0,n.useState)(!1);return(0,s.jsx)(a.Provider,{value:{showStats:i,setShowStats:l},children:e})}let r=()=>{let t=(0,n.useContext)(a);if(!t)throw Error("useAppTicker must be used within an AppTickerProvider");return t}},2138:function(t,e,i){"use strict";i.d(e,{KI:function(){return a},b1:function(){return o},g0:function(){return r},hd:function(){return s},oo:function(){return l}});var s=class{tick(){return this.t||this.p(),this.v()}pause(){this.l=n()}resume(){this.u+=(n()-this.l)/1e3}getTime(){return{elapsedTime:this.o,elapsedPausedTime:this.m}}p(){this.i=n(),this.h=this.i,this.t=!0}v(){let t=n(),e=(t-this.h)/1e3;return this.h=t,this.o+=e,this.m=this.o-this.u,e}constructor(){this.t=!1,this.i=0,this.h=0,this.o=0,this.l=0,this.u=0,this.m=0}};function n(){return performance.now()}var a=class{add(t,e){this.isExist(t)&&console.warn("ID: '".concat(t,"' already exist in the table."));let i=this.I(),s=i*this.stride;for(let[t,i]of Object.entries(e))this.table[s+Number(t)]=i;this.P.set(t,i),this.T.set(i,t),this.usedSlots+=1}remove(t){let e=this.M(t);if(e===this.usedSlots-1)this.T.delete(e);else{let t=this.usedSlots-1,i=this.T.get(t),s=t*this.stride,n=e*this.stride;for(let t=0;t<this.stride;t++)this.table[n+t]=this.table[s+t];this.P.set(i,e),this.T.set(e,i),this.T.delete(t)}this.P.delete(t),this.usedSlots-=1}getData(t,e){let i=this.M(t)*this.stride;return this.table[i+e]}modifyByID(t,e){let i=this.M(t);this.modifyByPosition(i,e)}modifyByPosition(t,e){let i=t*this.stride;for(let[t,s]of Object.entries(e))this.table[i+Number(t)]=s}isExist(t){return this.P.has(t)}M(t){let e=this.P.get(t);if(void 0===e)throw Error("ID: '".concat(t,"' is not found in the table."));return e}I(){return this.usedSlots===this.D&&this._(),this.usedSlots}_(){let t=2*this.D,e=new this.table.constructor(t*this.stride);e.set(this.table),this.table=e,this.D=t}constructor(t,e,i){this.usedSlots=0,this.P=new Map,this.T=new Map,this.table=new e(t*i),this.stride=t,this.D=i}},l=class{get(){for(let t=0;t<this.B.length;t++)if(!this.B[t])return t;let t=this.A;return this._(),t}consume(t){this.B[t]=1}release(t){this.B[t]=0}_(){let t=2*this.A,e=new Uint8Array(t);e.set(this.B),this.B=e,this.A=t}constructor(t){this.A=t,this.B=new Uint8Array(t)}},r=class{add(t){this.j.isExist(t.id)&&this.remove(t.id,!0);let{elapsedTime:e,elapsedPausedTime:i}=this.k.getTime(),s=this.$.get(),n=t.autoPause?i:e,a=t.duration||0,l=n+(t.delay||0);this.j.add(t.id,{0:s,1:a,2:l,3:l+a,4:t.onRender?1:0,5:t.autoPause?0:1,6:0}),this.O.set(t.id,s),this.$.consume(s),this.S[s]=t}remove(t){var e,i;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.O.get(t);void 0!==n?(null==(i=(e=this.S[n]).onEnd)||i.call(e,s),this.C(n)):console.warn("AnimationID: '".concat(t,"' does not exist."))}tick(){var t,e;let{table:i,usedSlots:s,stride:n}=this.j,{elapsedTime:a,elapsedPausedTime:l}=this.k.getTime();for(let r=0;r<s;r++){let s=r*n,o=1===i[s+5]?a:l,h=i[s+2];if(o<h)continue;let c=i[s+0],u=i[s+1],d=this.S[c];0===i[s+6]&&(i[s+6]=1,null==(t=d.onBegin)||t.call(d)),i[s+4]&&d.onRender(o,h,u),o>i[s+3]&&(null==(e=d.onEnd)||e.call(d,!1),this.C(c))}}C(t){let e=this.S[t].id;this.j.remove(e),this.O.delete(e),this.$.release(t),this.S[t]=void 0}constructor(t,e=20){this.O=new Map,this.S=[],this.k=t,this.$=new l(e),this.j=new a(7,Float32Array,e)}};function o(){let t=!1;if("maxTouchPoints"in navigator)t=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)t=navigator.msMaxTouchPoints>0;else{let e=matchMedia&&matchMedia("(pointer:coarse)");if(e&&"(pointer:coarse)"===e.media)t=!!e.matches;else if("orientation"in window)t=!0;else{let e=navigator.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(e)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(e)}}return t}}},function(t){t.O(0,[293,528,744],function(){return t(t.s=7273)}),_N_E=t.O()}]);