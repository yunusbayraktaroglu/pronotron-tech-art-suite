"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{1378:function(t,e,i){i.d(e,{PronotronStatsComponent:function(){return l},ot:function(){return a}});var s=i(7573),h=i(7653),n=i(5544);class o{build(){this.pixelRatio=1,this.table={FONTSIZE:9,WIDTH:80,HEIGHT:48,TEXT_X:3,TEXT_Y:2,GRAPH_X:3,GRAPH_Y:15,GRAPH_WIDTH:74,GRAPH_HEIGHT:30},this.createCanvas()}createCanvas(){let t=this.name,{FONTSIZE:e,WIDTH:i,HEIGHT:s,TEXT_X:h,TEXT_Y:n,GRAPH_X:o,GRAPH_Y:r,GRAPH_WIDTH:a,GRAPH_HEIGHT:l}=this.table,c=document.createElement("canvas");c.width=i,c.height=s,c.style.cssText="width:".concat(i,"px;height:").concat(s,"px");let d=c.getContext("2d");d.font="bold ".concat(e,"px Helvetica,Arial,sans-serif"),d.textBaseline="top",d.fillStyle=this.bg,d.fillRect(0,0,i,s),d.fillStyle=this.fg,d.fillText(t,h,n),d.fillRect(o,r,a,l),d.fillStyle=this.bg,d.globalAlpha=.9,d.fillRect(o,r,a,l),this.canvas=c,this.context=d}update(t){let e=this.pixelRatio,{WIDTH:i,HEIGHT:s,TEXT_X:h,TEXT_Y:n,GRAPH_X:o,GRAPH_Y:r,GRAPH_WIDTH:a,GRAPH_HEIGHT:l}=this.table;this.min=Math.min(this.min,t),this.max=Math.max(this.max,t),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,i,r),this.context.fillStyle=this.fg,this.context.fillText("".concat(Math.round(t)," ").concat(this.name," (").concat(Math.round(this.min)," - ").concat(Math.round(this.max),")"),h,n),this.context.drawImage(this.canvas,o+e,r,a-e,l,o,r,a-e,l),this.context.fillRect(o+a-e,r,e,l),this.context.fillStyle=this.bg,this.context.globalAlpha=.75,this.context.fillRect(o+a-e,r,e,Math.round((1-t/this.maxLimit)*l))}clearCanvas(){let{WIDTH:t,HEIGHT:e}=this.table;this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,t,e)}constructor(t,e,i){this.min=1/0,this.max=0,this.maxLimit=0,this.name=t,this.fg=e,this.bg=i}}class r{build(){this.ready||(this.fps.build(),this.ms.build(),this.mb.build(),this.fps.maxLimit=100,this.ms.maxLimit=2,this.ready=!0)}begin(){this.beginTime=performance.now()}end(){this.frames++;let t=performance.now();return this.ms.update(t-this.beginTime),this.ms.maxLimit=2*this.ms.max,t>=this.prevTime+1e3&&(this.fps.update(1e3*this.frames/(t-this.prevTime)),this.prevTime=t,this.frames=0),t}getPanels(){return[this.fps.canvas,this.ms.canvas]}resetPanels(){this.fps.clearCanvas(),this.ms.clearCanvas(),this.frames=0}constructor(){this.ready=!1,this.frames=0,this.fps=new o("FPS","#0ff","#002"),this.ms=new o("MS","#0f0","#020"),this.mb=new o("MB","#f08","#201"),this.beginTime=performance.now(),this.prevTime=this.beginTime}}let a=new r;function l(){let t=(0,h.useRef)(null),{showStats:e}=(0,n.W)();return(0,h.useEffect)(()=>{a.build();let e=t.current,i=a.getPanels();for(;e.firstChild;)e.removeChild(e.firstChild);i.forEach(t=>e.appendChild(t))},[]),(0,s.jsx)("div",{id:"performance-stats",className:"fixed flex flex-col left-2 bottom-2 opacity-[1] z-[999] space-y-[1px]"+(e?"":" hidden"),ref:t})}},5544:function(t,e,i){i.d(e,{PerformanceStatsProvider:function(){return o},W:function(){return r}});var s=i(7573),h=i(7653);let n=(0,h.createContext)(null);function o(t){let{children:e}=t,[i,o]=(0,h.useState)(!1);return(0,s.jsx)(n.Provider,{value:{showStats:i,setShowStats:o},children:e})}let r=()=>{let t=(0,h.useContext)(n);if(!t)throw Error("useAppTicker must be used within an AppTickerProvider");return t}},5357:function(t,e,i){i.d(e,{PronotronIOProvider:function(){return b},s:function(){return w}});var s=i(7573),h=i(7653),n=i(1695),o=i(2138),r=class{addNode(t){if(this.t.has(t.ref))return console.warn("Node is already in the list.",t.ref),!1;{let e=this.A.get();this.t.set(t.ref,e),this.i.set(e,t);let i=this.F(t.dispatch.onFastForward);return this.N.add(e,{0:e,1:0,2:0,3:0,4:0,5:t.dispatch.onInViewport?1:0,6:t.dispatch[this.k.I]?1:0,7:t.dispatch[this.k.B]?1:0,8:t.dispatch[this.k.L]?1:0,9:t.dispatch[this.k.M]?1:0,10:i}),this.A.consume(e),this.P(e,t),e}}removeNode(t){let e=this.t.get(t);void 0!==e?this.T([e]):console.warn("IONode is not found in the list.",t)}setLastScroll(t){this.h=t}updatePositions(t){this._=t,this.S(),this.i.forEach((t,e)=>this.P(e,t))}updateViewportLayout(t,e){e<=t&&console.warn("Tracking area must be bigger than 0 units"),this.o=t,this.l=e,this.v=e-t}U(t,e){return e<this.u?1:t>this.p?3:2}T(t){for(let e of t){let t=this.i.get(e);this.t.delete(t.ref),this.i.delete(e),this.N.remove(e),this.A.release(e),t.onRemoveNode&&t.onRemoveNode()}}P(t,e){let{start:i,end:s}=e.getBounds(),h=e.offset||0,n=this.m?Math.round(i-h):i-h,o=this.m?Math.round(s+h):s+h;this.N.modifyByID(t,{1:n,2:o})}F(t){switch(t){case"skip_both":default:return 0;case"execute_both":return 1;case"execute_last":return 2}}O(){this.u=this.o+this.h,this.p=this.l+this.h}S(){if(this.m&&this._>65535&&this.N.table.constructor!==Uint32Array){let t=Uint32Array.from(this.N.table);this.N.table=t}}constructor(t=20,e=!0){this.t=new Map,this.i=new Map,this.h=0,this.o=0,this.l=0,this.u=0,this.p=0,this.v=0,this._=0,this.m=e,this.N=new o.KI(11,e?Uint16Array:Float32Array,t),this.A=new o.oo(t)}},a=class extends r{handleScroll(t){this.direction=t>this.h?this.q.j:this.q.D,this.h=t,this.O(),this.G()}G(){let{table:t,stride:e,usedSlots:i}=this.N;for(let s=0;s<i;s++){let i=s*e,h=t[i+0],n=t[i+1],o=t[i+2],r=t[i+4],a=this.U(n,o);if(r!==a&&(0!==r&&this.R[r][a](i,h),this.N.modifyByPosition(s,{4:a,3:2===a?1:0})),t[i+5]&&t[i+3]){let t=this.H(n,o,this.h,this.v);this.J(h,t)}}}V(t,e,i,s){let h=this.N.table;h[t+i]&&(h[t+i]=this.K(e,s))}C(t,e,i,s,h,n){let o=this.N.table[t+10];if(0!==o)switch(o){case 2:this.V(t,e,h,n);break;case 1:this.V(t,e,i,s),this.V(t,e,h,n)}}H(t,e,i,s){return 2*(e-i)/(s+(e-t))-1}J(t,e){this.i.get(t).dispatch.onInViewport(e)}K(t,e){let i=this.i.get(t).dispatch[e];return"limit"in i?(i.dispatch(),i.limit-=1,i.limit<1?0:1):(i(),1)}constructor(){super(...arguments),this.R={2:{1:(t,e)=>{this.V(t,e,7,this.k.B)},3:(t,e)=>{this.V(t,e,9,this.k.M)}},1:{2:(t,e)=>{this.V(t,e,6,this.k.I)},3:(t,e)=>{this.C(t,e,6,this.k.I,9,this.k.M)}},3:{2:(t,e)=>{this.V(t,e,8,this.k.L)},1:(t,e)=>{this.C(t,e,8,this.k.L,7,this.k.B)}}}}},l=class extends a{constructor(){super(...arguments),this.direction="down",this.q={j:"down",D:"up"},this.k={I:"onTopEnter",B:"onTopExit",L:"onBottomEnter",M:"onBottomExit"}}},c=i(2842),d=i(9526),u=i.n(d),f=i(1378),m=i(5544);let p=(0,h.createContext)(null);function w(t){let e=(0,h.useContext)(p);if(!e)throw Error("useContextSelector must be used within a <PronotronIOProvider>");return t(e)}function b(t){let{children:e}=t,i=(0,n.usePathname)(),{setShowStats:o}=(0,m.W)(),r=(0,h.useMemo)(()=>new l,[]),a=(0,h.useCallback)(()=>window.visualViewport?{height:window.visualViewport.height,offsetTop:window.visualViewport.offsetTop,scale:window.visualViewport.scale}:{height:window.innerHeight,offsetTop:0,scale:1},[]),d=(0,h.useCallback)(t=>{r.updateViewportLayout(t.offsetTop,t.offsetTop+t.height)},[]);return(0,h.useEffect)(()=>{window.scrollTo({top:0}),d(a()),r.setLastScroll(0),r.handleScroll(window.scrollY)},[i]),(0,h.useEffect)(()=>{o(!0);let t=!1,e=0,{height:i,scale:s}=a(),h=()=>{t=!0},n=()=>{r.handleScroll(window.scrollY),t=!1},l=t=>{d(t),h()};u()(n,250,{leading:!1,trailing:!0});let m=u()(()=>{d(a()),r.updatePositions(document.documentElement.scrollHeight),h()},500,{leading:!1,trailing:!0}),p=()=>{let s=a();i!==s.height&&(i=s.height,l(s)),f.ot.begin(),t&&n(),f.ot.end(),e=requestAnimationFrame(p)};e=requestAnimationFrame(p),window.addEventListener("scroll",h,{passive:!0});let w=new(window.ResizeObserver||c.do)(()=>{m()});return w.observe(document.body),()=>{window.removeEventListener("scroll",h),cancelAnimationFrame(e),f.ot.resetPanels(),w.disconnect()}},[]),(0,s.jsx)(p.Provider,{value:{io:r},children:e})}},2138:function(t,e,i){i.d(e,{KI:function(){return n},b1:function(){return a},g0:function(){return r},hd:function(){return s},oo:function(){return o}});var s=class{tick(){return this.t||this.p(),this.v()}pause(){this.l=h()}resume(){this.u+=(h()-this.l)/1e3}getTime(){return{elapsedTime:this.o,elapsedPausedTime:this.m}}p(){this.i=h(),this.h=this.i,this.t=!0}v(){let t=h(),e=(t-this.h)/1e3;return this.h=t,this.o+=e,this.m=this.o-this.u,e}constructor(){this.t=!1,this.i=0,this.h=0,this.o=0,this.l=0,this.u=0,this.m=0}};function h(){return performance.now()}var n=class{add(t,e){this.isExist(t)&&console.warn("ID: '".concat(t,"' already exist in the table."));let i=this.I(),s=i*this.stride;for(let[t,i]of Object.entries(e))this.table[s+Number(t)]=i;this.P.set(t,i),this.T.set(i,t),this.usedSlots+=1}remove(t){let e=this.M(t);if(e===this.usedSlots-1)this.T.delete(e);else{let t=this.usedSlots-1,i=this.T.get(t),s=t*this.stride,h=e*this.stride;for(let t=0;t<this.stride;t++)this.table[h+t]=this.table[s+t];this.P.set(i,e),this.T.set(e,i),this.T.delete(t)}this.P.delete(t),this.usedSlots-=1}getData(t,e){let i=this.M(t)*this.stride;return this.table[i+e]}modifyByID(t,e){let i=this.M(t);this.modifyByPosition(i,e)}modifyByPosition(t,e){let i=t*this.stride;for(let[t,s]of Object.entries(e))this.table[i+Number(t)]=s}isExist(t){return this.P.has(t)}M(t){let e=this.P.get(t);if(void 0===e)throw Error("ID: '".concat(t,"' is not found in the table."));return e}I(){return this.usedSlots===this.D&&this._(),this.usedSlots}_(){let t=2*this.D,e=new this.table.constructor(t*this.stride);e.set(this.table),this.table=e,this.D=t}constructor(t,e,i){this.usedSlots=0,this.P=new Map,this.T=new Map,this.table=new e(t*i),this.stride=t,this.D=i}},o=class{get(){for(let t=0;t<this.B.length;t++)if(!this.B[t])return t;let t=this.A;return this._(),t}consume(t){this.B[t]=1}release(t){this.B[t]=0}_(){let t=2*this.A,e=new Uint8Array(t);e.set(this.B),this.B=e,this.A=t}constructor(t){this.A=t,this.B=new Uint8Array(t)}},r=class{add(t){this.j.isExist(t.id)&&this.remove(t.id,!0);let{elapsedTime:e,elapsedPausedTime:i}=this.k.getTime(),s=this.$.get(),h=t.autoPause?i:e,n=t.duration||0,o=h+(t.delay||0);this.j.add(t.id,{0:s,1:n,2:o,3:o+n,4:t.onRender?1:0,5:t.autoPause?0:1,6:0}),this.O.set(t.id,s),this.$.consume(s),this.S[s]=t}remove(t){var e,i;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=this.O.get(t);void 0!==h?(null==(i=(e=this.S[h]).onEnd)||i.call(e,s),this.C(h)):console.warn("AnimationID: '".concat(t,"' does not exist."))}tick(){var t,e;let{table:i,usedSlots:s,stride:h}=this.j,{elapsedTime:n,elapsedPausedTime:o}=this.k.getTime();for(let r=0;r<s;r++){let s=r*h,a=1===i[s+5]?n:o,l=i[s+2];if(a<l)continue;let c=i[s+0],d=i[s+1],u=this.S[c];0===i[s+6]&&(i[s+6]=1,null==(t=u.onBegin)||t.call(u)),i[s+4]&&u.onRender(a,l,d),a>i[s+3]&&(null==(e=u.onEnd)||e.call(u,!1),this.C(c))}}C(t){let e=this.S[t].id;this.j.remove(e),this.O.delete(e),this.$.release(t),this.S[t]=void 0}constructor(t,e=20){this.O=new Map,this.S=[],this.k=t,this.$=new o(e),this.j=new n(7,Float32Array,e)}};function a(){let t=!1;if("maxTouchPoints"in navigator)t=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)t=navigator.msMaxTouchPoints>0;else{let e=matchMedia&&matchMedia("(pointer:coarse)");if(e&&"(pointer:coarse)"===e.media)t=!!e.matches;else if("orientation"in window)t=!0;else{let e=navigator.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(e)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(e)}}return t}}}]);